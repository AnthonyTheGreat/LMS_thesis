angular.module("lmsApp",["ngRoute","ngAnimate","angularCSS","oc.lazyLoad","firebase"]),angular.module("lmsApp").config(["$routeProvider","$locationProvider",function(e,s){e.when("/",{title:"STC Learning Management System",templateUrl:"view/home.html",css:"style/home.css",controller:"loginCtrl",requireAuth:!1}).when("/home",{title:"STC Learning Management System",templateUrl:"view/home.html",css:"style/home.css",controller:"loginCtrl",requireAuth:!1}).when("/profile_info/:user",{title:"STC Learning Management System",templateUrl:"view/profileInfo.html",css:"style/signup.css",controller:"profileInfoCtrl"}).when("/profile",{title:"Profile",templateUrl:"view/studentProfile.html",css:"style/profile.css"}).when("/about",{title:"About Us",templateUrl:"view/about.html",css:[{href:"style/home.css",preload:!0},{href:"style/aboutus.css",preload:!0}]}).when("/signup",{title:"Sign Up",templateUrl:"view/signup.html",css:"style/signup.css",controller:"signupCtrl"}).when("/class_dashboard/class_recordList",{title:"Manage your class",templateUrl:"view/classDash/classRecord.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/classie.js","lib/modernizr.custom.js"]})}]}}).when("/class_dashboard/class_recordThumb",{title:"Manage your class",templateUrl:"view/classDash/classRecord2.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/classie.js","lib/modernizr.custom.js"]})}]}}).when("/class_dashboard/resources",{title:"Manage your class",templateUrl:"view/classDash/classResources.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/modernizr.custom.js","lib/classie.js"]})}]}}).when("/class_dashboard/createannouncement",{title:"Manage your class",templateUrl:"view/classDash/announcementtab.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/modernizr.custom.js","lib/classie.js"]})}]}}).when("/class_dashboard/createassignment",{title:"View your resources",templateUrl:"view/classDash/assignmenttab.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/modernizr.custom.js","lib/classie.js"]})}]}}).when("/class_dashboard/createquiz",{title:"Manage your class",templateUrl:"view/classDash/quiztab.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],controller:"createQuizCtrl",resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/modernizr.custom.js","lib/classie.js"]})}]}}).when("/group",{title:"Your Groups",templateUrl:"view/group.html",css:[{href:"style/group.css",preload:!0},{href:"style/profile.css",preload:!0}]}).when("/forum_home",{title:"Latest Forum Topics",templateUrl:"view/forum_home.html",css:[{href:"style/forum/forum_home.css",preload:!0},{href:"style/profile.css",preload:!0}]}).when("/forum_post",{title:"Forum",templateUrl:"view/forum_post.html",css:[{href:"style/forum/forum_post.css",preload:!0},{href:"style/profile.css",preload:!0}]}).when("/admin",{title:"Admin Page",templateUrl:"view/admin/home.html",css:"style/admin.css",requireAuth:!0}).when("/admin/schedule",{title:"Admin Page",templateUrl:"view/admin/schedule.html",css:"style/admin.css",requireAuth:!0}).when("/admin/groups",{title:"Admin Page",templateUrl:"view/admin/groups.html",css:"style/admin.css",requireAuth:!0}).when("/admin/events",{title:"Admin Page",templateUrl:"view/admin/events.html",css:{href:"style/admin.css",preload:!0},controller:"eventsCtrl",requireAuth:!0}).when("/admin/forum",{title:"Admin Page",templateUrl:"view/admin/forum.html",css:"style/admin.css",requireAuth:!0}).when("/admin/forum_topics",{title:"Admin Page",templateUrl:"view/admin/forum_topics.html",css:"style/admin.css",requireAuth:!0}).otherwise({redirectTo:"/"})}]),angular.module("lmsApp").run(["$rootScope",function(e){e.$on("$routeChangeSuccess",function(s,t,l){t.hasOwnProperty("$$route")&&(e.title=t.$$route.title)})}]),angular.module("lmsApp").controller("createQuizCtrl",["$scope",function(e){var s=firebase.database().ref("/quiz");console.log(s),e.setQuiz=function(e){s.push({q_num:e.qnum,q_title:e.qtitle,q_type:e.qtype}),console.log("pushing")}}]),angular.module("lmsApp").controller("loginCtrl",["$scope","$firebaseAuth","$firebaseArray","$location",function(e,s,t,l){e.authObj=s();var a=firebase.database().ref("/users");t(a);e.LoginFacebook=function(){e.authObj.$signInWithPopup("facebook").then(function(e){o(e.user.uid)})["catch"](function(e){console.error("Authentication failed:",e.message)})},e.LoginGoogle=function(){e.authObj.$signInWithPopup("google").then(function(e){o(e.user.uid)})["catch"](function(e){console.error("Authentication failed:",e.message)})},e.LoginEmail=function(s){e.authObj.$signInWithEmailAndPassword(s.email,s.password).then(function(e){o(e.user.uid)})["catch"](function(e){alert("Authentication failed:"+e.message)})};var o=function(e){function s(){a.on("value",function(e){return e})}var t=firebase.auth().currentUser;s()?a.child(e).on("value",function(e){var s=e.val().utype;switch(s){case"student":l.path("/profile");break;case"teacher":l.path("/profile");break;case"admin":l.path("/profile");break;default:l.path("/profile_info/"+t.uid)}}):l.path("/profile_info/"+t.uid)}}]),angular.module("lmsApp").controller("profileInfoCtrl",["$scope","$firebaseObject","$location","$routeParams","$firebaseAuth","pageAuth",function(e,s,t,l,a,o){e.profileInfo={utype:"student"};var r=a(),i=r.$getAuth(),n=l.user,c=firebase.database().ref("/users/"+n),u=s(c);e.submitInfo=function(e){u.utype=e.utype,u.firstname=e.firstname,u.lastname=e.lastname,u.description=e.Description,u.$save().then(function(e){i?(console.log("Signed in as:",i.uid),t.path("/profile")):t.path("/")})["catch"](function(e){console.log(e)})}}]),angular.module("lmsApp").controller("signupCtrl",["$scope","$firebaseArray","$firebaseAuth","$location",function(e,s,t,l){e.load=!1;var a=t(),o=firebase.database().ref("/users");s(o);e.LoginFacebook=function(){e.load=!0,a.$signInWithPopup("facebook").then(function(e){o.child(e.user.uid).update({email:e.user.email,id:e.user.uid}),l.path("/profile_info/"+e.user.uid)})["catch"](function(s){e.load=!1,alert("Authentication failed: ",s.message)})},e.LoginGoogle=function(){e.load=!0,a.$signInWithPopup("google").then(function(e){o.child(e.user.uid).update({email:e.user.email,id:e.user.uid}),l.path("/profile_info/"+e.user.uid)})["catch"](function(s){e.load=!1,alert("Authentication failed: ",s.message)})},e.submitForm=function(s){e.reg_form.$valid&&a.$createUserWithEmailAndPassword(s.email,s.password).then(function(s){e.load=!0,o.child(s.uid).update({email:s.email,id:s.uid}),l.path("/profile_info/"+s.uid)})["catch"](function(s){e.load=!1,"auth/email-already-in-use"==s.code?alert(s.message):console.log("Auth failed: "+s)})}}]),angular.module("lmsApp").config(["$routeProvider","$locationProvider",function(e){e.when("/",{title:"STC Learning Management System",templateUrl:"view/home.html",css:"style/home.css",controller:"loginCtrl",requireAuth:!1}).when("/home",{title:"STC Learning Management System",templateUrl:"view/home.html",css:"style/home.css",controller:"loginCtrl",requireAuth:!1}).when("/profile_info/:user",{title:"STC Learning Management System",templateUrl:"view/profileInfo.html",css:"style/signup.css",controller:"profileInfoCtrl"}).when("/profile",{title:"Profile",templateUrl:"view/studentProfile.html",css:"style/profile.css"}).when("/about",{title:"About Us",templateUrl:"view/about.html",css:[{href:"style/home.css",preload:!0},{href:"style/aboutus.css",preload:!0}]}).when("/signup",{title:"Sign Up",templateUrl:"view/signup.html",css:"style/signup.css",controller:"signupCtrl"}).when("/class_dashboard/class_recordList",{title:"Manage your class",templateUrl:"view/classDash/classRecord.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/classie.js","lib/modernizr.custom.js"]})}]}}).when("/class_dashboard/class_recordThumb",{title:"Manage your class",templateUrl:"view/classDash/classRecord2.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/classie.js","lib/modernizr.custom.js"]})}]}}).when("/class_dashboard/resources",{title:"Manage your class",templateUrl:"view/classDash/classResources.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/modernizr.custom.js","lib/classie.js"]})}]}}).when("/class_dashboard/createannouncement",{title:"Manage your class",templateUrl:"view/classDash/announcementtab.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/modernizr.custom.js","lib/classie.js"]})}]}}).when("/class_dashboard/createassignment",{title:"View your resources",templateUrl:"view/classDash/assignmenttab.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/modernizr.custom.js","lib/classie.js"]})}]}}).when("/class_dashboard/createquiz",{title:"Manage your class",templateUrl:"view/classDash/quiztab.html",css:["style/classDash/component.css","style/classDash/default.css","style/classDash/classdash.css"],controller:"createQuizCtrl",resolve:{lazy:["$ocLazyLoad",function(e){return e.load({files:["lib/modernizr.custom.js","lib/classie.js"]})}]}}).when("/group",{title:"Your Groups",templateUrl:"view/group.html",css:[{href:"style/group.css",preload:!0},{href:"style/profile.css",preload:!0}]}).when("/forum_home",{title:"Latest Forum Topics",templateUrl:"view/forum_home.html",css:[{href:"style/forum/forum_home.css",preload:!0},{href:"style/profile.css",preload:!0}]}).when("/forum_post",{title:"Forum",templateUrl:"view/forum_post.html",css:[{href:"style/forum/forum_post.css",preload:!0},{href:"style/profile.css",preload:!0}]}).when("/admin",{title:"Admin Page",templateUrl:"view/admin/home.html",css:"style/admin.css",requireAuth:!0}).when("/admin/schedule",{title:"Admin Page",templateUrl:"view/admin/schedule.html",css:"style/admin.css",requireAuth:!0}).when("/admin/groups",{title:"Admin Page",templateUrl:"view/admin/groups.html",css:"style/admin.css",requireAuth:!0}).when("/admin/events",{title:"Admin Page",templateUrl:"view/admin/events.html",css:{href:"style/admin.css",preload:!0},controller:"eventsCtrl",requireAuth:!0}).when("/admin/forum",{title:"Admin Page",templateUrl:"view/admin/forum.html",css:"style/admin.css",requireAuth:!0}).when("/admin/forum_topics",{title:"Admin Page",templateUrl:"view/admin/forum_topics.html",css:"style/admin.css",requireAuth:!0}).otherwise({redirectTo:"/"})}]),angular.module("lmsApp").run(["$rootScope",function(e){e.$on("$routeChangeSuccess",function(s,t){t.hasOwnProperty("$$route")&&(e.title=t.$$route.title)})}]),angular.module("lmsApp").service("pageAuth",["$location","$rootScope",function(e,s){var t=function(s,t,l){var a=firebase.auth().currentUser;t.$$route.requireAuth&&null==a?(s.preventDefault(),alert("You must be logged in to access page!")):0==t.$$route.requireAuth&&null!==a&&e.path("/profile")};s.$on("$routeChangeStart",t)}]),angular.module("lmsApp").run(function(e){}),angular.module("lmsApp").controller("eventsCtrl",["$scope",function(e){e.toggleAdd=!0;var s=new Date;e.dateNow=s;var t=new Date,l=t.setFullYear(t.getFullYear()+20);e.futureDate=l}]),angular.module("lmsApp").controller("createQuizCtrl",["$scope",function(e){var s=firebase.database().ref("/quiz");console.log(s),e.setQuiz=function(e){s.push({q_num:e.qnum,q_title:e.qtitle,q_type:e.qtype}),console.log("pushing")}}]);